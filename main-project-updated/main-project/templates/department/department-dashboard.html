{% extends 'Home/base.html' %}
{% load static %}
{% block body %}
<div class="page-wrapper">
   <div class="content container-fluid">
      <!-- Page Header -->
      <div class="page-header">
         <div class="row">
            <div class="col-sm-12">
               <img src="{% static 'logo-small.png.jpg' %}" alt="Logo" style="width:150px; display:block; margin: 0 auto;">
               <h3 class="page-title">Department Dashboard</h3>
               <ul class="breadcrumb">
                  <li class="breadcrumb-item"><a href="{% url 'department_list' %}">Departments</a></li>
                  <li class="breadcrumb-item active">Dashboard</li>
               </ul>
            </div>
         </div>
      </div>
      <!-- Department Stats Cards -->
      <div class="row">
         <div class="col-xl-3 col-sm-6 col-12 d-flex">
            <div class="card bg-one w-100">
               <div class="card-body">
                  <div class="db-widgets d-flex justify-content-between align-items-center">
                     <div class="db-icon">
                        <i class="fas fa-building"></i>
                     </div>
                     <div class="db-info">
                        <h3>{{ departments.count }}</h3>
                        <h6>Total Departments</h6>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="col-xl-3 col-sm-6 col-12 d-flex">
            <div class="card bg-two w-100">
               <div class="card-body">
                  <div class="db-widgets d-flex justify-content-between align-items-center">
                     <div class="db-icon">
                        <i class="fas fa-plus-circle"></i>
                     </div>
                     <div class="db-info">
                        <h3>{{ new_departments|default:"0" }}</h3>
                        <h6>New Departments</h6>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- You can add more cards as needed -->
      </div>
      <!-- Departments List Table -->
      <div class="row">
         <div class="col-md-12">
            <div class="card">
               <div class="card-header">
                  <h5 class="card-title">Departments List</h5>
               </div>
               <div class="card-body">
                  <div class="table-responsive">
                     <table class="table table-hover table-center">
                        <thead class="thead-light">
                           <tr>
                              <th>#</th>
                              <th>Name</th>
                              <th>Description</th>
                              <th>Created At</th>
                              <th>Updated At</th>
                              <th>Actions</th>
                           </tr>
                        </thead>
                        <tbody>
                           {% for department in departments %}
                           <tr>
                              <td>{{ forloop.counter }}</td>
                              <td>{{ department.name }}</td>
                              <td>{{ department.description }}</td>
                              <td>{{ department.created_at|date:"M d, Y" }}</td>
                              <td>{{ department.updated_at|date:"M d, Y" }}</td>
                              <td>
                                 <a href="{% url 'department_detail' department.pk %}" class="btn btn-sm btn-primary">View</a>
                                 <a href="{% url 'department_edit' department.pk %}" class="btn btn-sm btn-warning">Edit</a>
                                 <a href="{% url 'department_delete' department.pk %}" class="btn btn-sm btn-danger">Delete</a>
                              </td>
                           </tr>
                           {% empty %}
                           <tr>
                              <td colspan="6" class="text-center">No departments found.</td>
                           </tr>
                           {% endfor %}
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <footer>
         <p>Copyright Â© 2020 Dreamguys.</p>
      </footer>
   </div>
</div>
<!-- Scripts -->
<script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'assets/js/popper.min.js' %}"></script>
<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
<script src="{% static 'assets/plugins/apexchart/apexcharts.min.js' %}"></script>
<script src="{% static 'assets/plugins/apexchart/chart-data.js' %}"></script>
<script src="{% static 'assets/js/script.js' %}"></script>
{% endblock %}
